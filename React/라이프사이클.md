# LifeCycle

![](https://cdn-images-1.medium.com/max/2600/1*bqLzlcQEU8e7yWQ3tKSaxQ.png)

React ì»´í¬ë„ŒíŠ¸ì˜ ì¶œìƒê³¼ ì‚¬ë§(ìƒëª… ì£¼ê¸°)ì—ì„œì˜ LifeCycle ì…ë‹ˆë‹¤.

> `LifeCycle APIëŠ”`, ì»´í¬ë„ŒíŠ¸ê°€ DOMìœ„ì— ìƒì„±ë˜ê¸° ì „ í›„ ë° ë°ì´í„°ê°€ ë³€ê²½ë˜ì–´ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ì „ í›„ë¡œ ì‹¤í–‰ë˜ëŠ” ë©”ì†Œë“œ ë“¤ì…ë‹ˆë‹¤.

ReactÂ ì»´í¬ë„ŒíŠ¸ì˜ ë¼ì´í”„ ì‚¬ì´í´ ë©”ì†Œë“œë¥¼ í†µí•´ UIì˜ ê° ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§, ì—…ë°ì´íŠ¸, ì¬ëœë”ë§ ë  ë•Œë¥¼ ê³ ë ¤í•  ìˆ˜ ìˆìœ¼ë©° ì™„ì „íˆ ì‚¬ë¼ì§ˆë•Œ ì¼ì–´ë‚˜ëŠ” ì¼ì„ ì œì–´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ğŸ· `DOM (Document Object Model: ë¬¸ì„œ ê°ì²´ ëª¨ë¸)`\
> ì›¹í˜ì´ì§€ë¥¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì œì–´í•˜ê¸° ìœ„í•œ ê°ì²´ ëª¨ë¸\
> https://gitlab.com/siots-study/topics/wikis/dom

**React 16.0 Life Cycle**
![React 16.0 Life Cycle](https://cdn-images-1.medium.com/max/2000/1*Y4Sf-f3WRHh1H1345r_kRQ.jpeg)

![ì´ì „ ë¼ì´í”„ë¼ì´í´](https://velopert.com/wp-content/uploads/2016/03/Screenshot-from-2016-12-10-00-21-26-1.png)

<!-- 16.0 ë²„ì „ LifeCycleì…ë‹ˆë‹¤.
ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„± í•  ë•ŒëŠ” constructor(ì»¨ìŠ¤íŠ¸ëŸ­í„°)-> componentWillMount(ì»´í¬ë„ŒíŠ¸ ìœŒ ë§ˆìš´íŠ¸) -> render (ë Œë”)-> componentDidMount (ì»´í¬ë„ŒíŠ¸ ë””ë“œ ë§ˆìš´íŠ¸) ìˆœìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ë¥¼ ì œê±° í•  ë•ŒëŠ” componentWillUnmount (ì»´í¬ë„ŒíŠ¸ ìœŒ ì–¸ë§ˆìš´íŠ¸)ë©”ì†Œë“œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ì˜ props(í”„ë¡œí¼í‹°)ì´ ë³€ê²½ë  ë•Œì—” componentWillReceiveProps (ì»´í¬ë„ŒíŠ¸ ìœŒ ë¦¬ì‹œë¸Œ í”„ë¡œí¼í‹°)-> shouldComponentUpdate (ìŠˆë“œ ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸)-> componentWillUpdate (ì»´í¬ë„ŒíŠ¸ ìœŒ ì—…ë°ì´íŠ¸)-> render (ë Œë”)-> componentDidUpdate (ì»´í¬ë„ŒíŠ¸ ë””ë“œ ì—…ë°ì´íŠ¸)ìˆœìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.
 -->

> ğŸ· **props**\
>  propsëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° ë¬¼ë ¤ë°›ëŠ” ì†ì„±ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì™€ ì†Œí†µí•  ìˆ˜ë„ ìˆì£ . ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì „ë‹¬í•˜ëŠ” propsê°€ ë°”ë€Œë©´ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤\
> ğŸ’¡ `props`ëŠ” `properties`ì˜ ì¤„ì„ë§ì´ë¯€ë¡œ íŠ¹ë³„í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.

**React 16.4 Life Cycle**
![React 16.4 Life Cycle](https://cdn-images-1.medium.com/max/2000/1*cEWErpe-oY-_S1dOaT1NtA.jpeg)

<!-- 16.4ì—ì„œëŠ” ìƒˆë¡œìš´ ë§¤ì†Œë“œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.  ì´ì œ í•˜ë‚˜í•˜ë‚˜ ë©”ì†Œë“œì— ëŒ€í•´ ì•Œì•„ë³¼ê»˜ìš” -->

[ë²„ì „ ë³„ ë¼ë¦¬í”„ì‚¬ì´í´ ë©”ì†Œë“œ í™•ì¸ ì‚¬ì´íŠ¸](http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)

## Mounting (ì»´í¬ë„ŒíŠ¸ ì´ˆê¸° ìƒì„±)

ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ì‹¤í–‰ë  ë•Œ ê·¸ê²ƒì„ Mountë¼ê³  í‘œí˜„í•©ë‹ˆë‹¤.
React ì»´í¬ë„ŒíŠ¸ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  DOMì— ì‚½ì…ë˜ëŠ” ê³¼ì •ì˜ life cycleì…ë‹ˆë‹¤.

### ğŸŒŸ1. constructor

```js
// ì»´í¬ë„ŒíŠ¸ ìƒì„±ì í•¨ìˆ˜
constructor(props){
    super(props);
    // ì—¬ê¸°ì„œ this.setState() í˜¸ì¶œì„ í•˜ì§€ ë§ˆì„¸ìš”!
}
```

- ìƒì„±ì ë©”ì†Œë“œë¡œì„œ ì»´í¬ë„ŒíŠ¸ê°€ ìƒˆë¡œ ë§Œë“¤ì–´ì§ˆ ë•Œë§ˆë‹¤ ì´ í•¨ìˆ˜ê°€ í˜¸ì¶œì´ ë©ë‹ˆë‹¤.
- ê¸°ë³¸ stateë¥¼ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- React ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ê¸° ì „ì— í˜¸ì¶œë©ë‹ˆë‹¤.
- this.stateì— ê°ì²´ë¥¼ ëŒ€ì…í•¨ìœ¼ë¡œì¨ ì§€ì—­ ìƒíƒœë¥¼ ì´ˆê¸°í™”í•œë‹¤.
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë©”ì†Œë“œì— ëŒ€í•œ ë°”ì¸ë”© ì²˜ë¦¬ë¥¼ í•œë‹¤.

### 2. ~~componentWillMount~~

```js
componentWillMount() {

}
```

ì»´í¬ë„ŒíŠ¸ê°€ DOMìœ„ì— ë§Œë“¤ì–´ì§€ê¸° ì „ì— ì‹¤í–‰ì´ë©ë‹ˆë‹¤. ì¦‰ ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜ê°€ê¸° ì§ì „ì— í˜¸ì¶œë˜ëŠ” API ì´ê³  ì›ë˜ëŠ” ì£¼ë¡œ ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ í™˜ê²½ì—ì„œ(ì„œë²„ì‚¬ì´ë“œ)ë„ í˜¸ì¶œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ì˜€ì§€ë§Œ **ì´ APIëŠ” ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.** v16.3ì´í›„ëŠ” `UNSAFE_componentWillMount()`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
`constructor`ì™€ `componentDidMount`ë¡œ ì¶©ë¶„íˆ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

> **componentWillMount ì°¸ê³ ë° ë¹„ì¶”ì²œ!**\
> componentWillMountì—ì„œëŠ” `props`ë‚˜ `state`ë¥¼ ë°”ê¾¸ë©´ ì•ˆë©ë‹ˆë‹¤. ì´ìœ ëŠ” Mountì¤‘ì´ê¸° ë•Œë¬¸ì´ë˜ìš”. ê·¸ë¦¬ê³  DOM renderí•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— DOMì—ë„ ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•˜ë‹µë‹ˆë‹¤.\
> ê³µì‹ í˜ì´ì§€ì—ì„œ ì´ ë©”ì†Œë“œëŠ” ë¶€ì‘ìš©ì„ ì´ˆë˜ í•˜ë‹ˆ **ë¹„ì¶”ì²œ**

### ğŸŒŸ3. render

ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

### ğŸŒŸ4. componentDidMount

```js
componentDidMount() {
  // ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ë™: D3, masonry, etc
  // ì»´í¬ë„ŒíŠ¸ì—ì„œ í•„ìš”í•œ ë°ì´í„° ìš”ì²­: Ajax, GraphQL, etc
  // DOM ì— ê´€ë ¨ëœ ì‘ì—…: ìŠ¤í¬ë¡¤ ì„¤ì •, í¬ê¸° ì½ì–´ì˜¤ê¸° ë“±
}
```

ì´ APIëŠ” ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚˜ê²Œ ëì„ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì£¼ë¡œ DOMì„ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ë™ì„ í•˜ê±°ë‚˜, í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•„ìš”ë¡œí•˜ëŠ” ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.

> `setState`í•˜ë©´ ë‹¤ì‹œ ë Œë”ë§ì´ ì‹œì‘ë˜ë¯€ë¡œ ì£¼ì˜!

## Updating (ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸)

ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ëŠ” `props`ì˜ ë³€í™”, ê·¸ë¦¬ê³  `state`ì˜ ë³€í™”ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤.

### 1. ~~componentWillReceiveProps~~

```js
componentWillReceiveProps(nextProps) {
  // this.props ëŠ” ì•„ì§ ë°”ë€Œì§€ ì•Šì€ ìƒíƒœ
}
```

<!-- getDerivedStateFromProps (ê²Ÿ ë”ë¼ë¸Œë“œ ìŠ¤í…Œì´íŠ¸ í”„ëŸ¼ í”„ë¡œí¼í‹°) -->

ì»´í¬ë„ŒíŠ¸ê°€ ìƒˆë¡œìš´ `props`ë¥¼ ë°›ê²Œëì„ ë•Œ í˜¸ì¶œì´ ë©ë‹ˆë‹¤. `state`ê°€ `props`ì— ë”°ë¼ ë³€í•´ì•¼í•˜ëŠ” ë¡œì§ì„ ì‘ì„±í•©ë‹ˆë‹¤. ìƒˆë¡œ ë°›ê²Œ ë  propsëŠ” nextPropsë¡œ ì¡°íšŒ í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë•Œ this.propsë¥¼ ì¡°íšŒí•˜ë©´ ì—…ë°ì´íŠ¸ ë˜ê¸° ì „ì— APIì…ë‹ˆë‹¤.
v16.3 ë¶€í„° `UNSAFE_componentWillReceiveProps()`ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ ê¸°ëŠ¥ì€ ìƒí™©ì— ë”°ë¼ ìƒˆë¡œìš´ `getDerivedStateFromProps`ë¡œ ëŒ€ì²´ ë  ìˆ˜ìˆìŠµë‹ˆë‹¤.

> **componentWillReceiveProps ì°¸ê³  ë° ë¹„ì¶”ì²œ**
> ì´ ì•ˆì— `this.setState()`ë¥¼ í•´ë„ ì¶”ê°€ì ìœ¼ë¡œ ë Œë”ë§í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> ê³µì‹ í˜ì´ì§€ì—ì„œ ì´ ë©”ì†Œë“œë¥¼ **ë¹„ì¶”ì²œ**

### 2. [NEW] static getDerivedStateFromProps()

ì´ ë©”ì†Œë“œëŠ” ì»´í¬ë„ŒíŠ¸ ì´ˆê¸°í™” ë˜ëŠ” ìƒˆë¡œìš´ propsë¥¼ ë°›ì•˜ ì„ ë•Œ ì¼ì–´ë‚©ë‹ˆë‹¤.
`props`ë¡œ ë°›ì•„ì˜¨ ê°’ì„ stateë¡œ ë™ê¸°í™” í•˜ëŠ” ì‘ì—…ì„ í•´ì¤˜ì•¼ í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

```js
static getDerivedStateFromProps(nextProps, prevState) {
  // ì—¬ê¸°ì„œëŠ” setState ë¥¼ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼
  // íŠ¹ì • props ê°€ ë°”ë€” ë•Œ ì„¤ì •í•˜ê³  ì„¤ì •í•˜ê³  ì‹¶ì€ state ê°’ì„ ë¦¬í„´í•˜ëŠ” í˜•íƒœë¡œ
  // ì‚¬ìš©ë©ë‹ˆë‹¤.
  /*
  if (nextProps.value !== prevState.value) {
    return { value: nextProps.value };
  }
  return null; // null ì„ ë¦¬í„´í•˜ë©´ ë”°ë¡œ ì—…ë°ì´íŠ¸ í•  ê²ƒì€ ì—†ë‹¤ë¼ëŠ” ì˜ë¯¸
  */
}
```

### 3. shouldComponentUpdate

```js
shouldComponentUpdate(nextProps, nextState) {
  // return false í•˜ë©´ ì—…ë°ì´íŠ¸ë¥¼ ì•ˆí•¨
  // return this.props.checked !== nextProps.checked
  return true;
}
```

ì»´í¬ë„ŒíŠ¸ë¥¼ ìµœì í™”í•˜ëŠ” ì‘ì—…ì—ì„œ ë§¤ìš° ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•©ë‹ˆë‹¤. `props` í˜¹ì€ `state`ê°€ ë³€ê²½ ë˜ì—ˆì„ ë•Œ, ë¦¬ë Œë”ë§ì„ í• ì§€ ë§ì§€ ì •í•˜ëŠ” ë©”ì†Œë“œì…ë‹ˆë‹¤. ìœ„ ì˜ˆì œì—ì„  ë¬´ì¡°ê±´ true ë¥¼ ë°˜í™˜ í•˜ë„ë¡ í•˜ì˜€ì§€ë§Œ, ì‹¤ì œë¡œ ì‚¬ìš© í•  ë–„ëŠ” í•„ìš”í•œ ë¹„êµë¥¼ í•˜ê³  ê°’ì„ ë°˜í™˜í•˜ë„ë¡ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

> ë¦¬ì•¡íŠ¸ì—ì„œëŠ” ë³€í™”ê°€ ë°œìƒí•˜ëŠ” ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸ë¥¼ í•´ì¤˜ì„œ ì„±ëŠ¥ì´ ê½¤ ì˜ ë‚˜ì˜¨ë‹¤ê³  í–ˆì—ˆì§€ìš”? í•˜ì§€ë§Œ, ë³€í™”ê°€ ë°œìƒí•œ ë¶€ë¶„ë§Œ ê°ì§€í•´ë‚´ê¸° ìœ„í•´ì„œëŠ” Virtual DOM ì— í•œë²ˆ ê·¸ë ¤ì¤˜ì•¼í•©ë‹ˆë‹¤.
>
> ì¦‰, í˜„ì¬ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šì•„ë„, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ë©´, ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ë„ ë Œë”ë§ ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ â€œë Œë”ë§â€ ëœë‹¤ëŠ”ê±´, render() í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.
>
> ë³€í™”ê°€ ì—†ìœ¼ë©´ ë¬¼ë¡  DOM ì¡°ì‘ì€ í•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤. ê·¸ì € Virutal DOM ì—ë§Œ ë Œë”ë§ í•  ë¿ì´ì£ . ì´ ì‘ì—…ì€ ê·¸ë ‡ê²Œ ë¶€í•˜ê°€ ë§ì€ ì‘ì—…ì€ ì•„ë‹ˆì§€ë§Œ, ì»´í¬ë„ŒíŠ¸ê°€ ë¬´ìˆ˜íˆ ë§ì´ ë Œë”ë§ëœë‹¤ë©´ ì–˜ê¸°ê°€ ì¡°ê¸ˆ ë‹¬ë¼ì§‘ë‹ˆë‹¤. CPU ìì›ì„ ì–´ëŠì •ë„ ì‚¬ìš©í•˜ê³  ìˆëŠ”ê²ƒì€ ì‚¬ì‹¤ì´ë‹ˆê¹Œìš”.
>
> ì“¸ëŒ€ì—†ì´ ë‚­ë¹„ë˜ê³  ìˆëŠ” ì´ CPU ì²˜ë¦¬ëŸ‰ì„ ì¤„ì—¬ì£¼ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” Virtual DOM ì— ë¦¬ë Œë”ë§ í•˜ëŠ”ê²ƒë„,ë¶ˆí•„ìš”í• ê²½ìš°ì—” ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ shouldComponentUpdate ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

> ğŸ· Virtual DOM \
> ì‹¤ì œ DOM ì— ì ìš©ë˜ê¸° ì „ì— ê°€ìƒì˜ DOMì— ë¨¼ì € ì ìš©ì‹œí‚¤ê³  ê·¸ ìµœì¢…ì ì¸ ê²°ê³¼ë¥¼ ì‹¤ì œ DOMìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
> https://velopert.com/3236

### 4. ~~componentWillUpdate~~

```js
componentWillUpdate(nextProps, nextState) {

}
```

`shouldComponentUpdate`ì—ì„œ trueë¥¼ ë°˜í™˜í–ˆì„ë•Œë§Œ í˜¸ì¶œë©ë‹ˆë‹¤. ì—¬ê¸°ì„  ì£¼ë¡œ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜, ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì—†ì• ëŠ” ì‘ì—…ì„ í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê³  ë‚œ ë‹¤ìŒ render()ê°€ í˜¸ì¶œë©ë‹ˆë‹¤. ê¸°ì¡´ ê¸°ëŠ¥ì€ `getSnapshotBeforeUpdate`ë¡œ ëŒ€ì²´ ë ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **shouldComponentUpdate ì°¸ê³  ë° ë¹„ì¶”ì²œ**
> ì´ ì•ˆì— `this.setState()`í•˜ë©´ **ë¬´í•œë£¨í”„ì— ë¹ ì§‘ë‹ˆë‹¤.**
> ê³µì‹ í˜ì´ì§€ì—ì„œ ì´ ë©”ì†Œë“œë¥¼ **ë¹„ì¶”ì²œ**

### 5. [NEW] getSnapshotBeforeUpdate()

ì´ API ê°€ ë°œìƒí•˜ëŠ” ì‹œì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. render()
1. **getSnapshotBeforeUpdate()**
1. ì‹¤ì œ DOM ì— ë³€í™” ë°œìƒ
1. componentDidUpdate

ì´ APIë¥¼ í†µí•´ì„œ, DOM ë³€í™”ê°€ ì¼ì–´ë‚˜ê¸° ì§ì „ì˜ DOM ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ê³ , ì—¬ê¸°ì„œ ë¦¬í„´í•˜ëŠ” ê°’ì€ componentDidUpdate ì—ì„œ 3ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

ì´ ë©”ì†Œë“œì—ì„œ ë°˜í™˜ëœ ê°’ì„ `componentDidUpdate`ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.

```js
 getSnapshotBeforeUpdate(prevProps, prevState) {
    // DOM ì—…ë°ì´íŠ¸ê°€ ì¼ì–´ë‚˜ê¸° ì§ì „ì˜ ì‹œì ì…ë‹ˆë‹¤.
    // ìƒˆ ë°ì´í„°ê°€ ìƒë‹¨ì— ì¶”ê°€ë˜ì–´ë„ ìŠ¤í¬ë¡¤ë°”ë¥¼ ìœ ì§€í•´ë³´ê² ìŠµë‹ˆë‹¤.
    // scrollHeight ëŠ” ì „ í›„ë¥¼ ë¹„êµí•´ì„œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•¨ì´ê³ ,
    // scrollTop ì€, ì´ ê¸°ëŠ¥ì´ í¬ë¡¬ì— ì´ë¯¸ êµ¬í˜„ì´ ë˜ì–´ìˆëŠ”ë°,
    // ì´ë¯¸ êµ¬í˜„ì´ ë˜ì–´ìˆë‹¤ë©´ ì²˜ë¦¬í•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.
    if (prevState.array !== this.state.array) {
      const {
        scrollTop, scrollHeight
      } = this.list;

      // ì—¬ê¸°ì„œ ë°˜í™˜ í•˜ëŠ” ê°’ì€ componentDidMount ì—ì„œ snapshot ê°’ìœ¼ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      return {
        scrollTop, scrollHeight
      };
    }
  }

  componentDidUpdate(prevProps, prevState, snapshot) {
    if (snapshot) {
      const { scrollTop } = this.list;
      if (scrollTop !== snapshot.scrollTop) return; // ê¸°ëŠ¥ì´ ì´ë¯¸ êµ¬í˜„ë˜ì–´ìˆë‹¤ë©´ ì²˜ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      const diff = this.list.scrollHeight - snapshot.scrollHeight;
      this.list.scrollTop += diff;
    }
  }
```

### 6. componentDidUpdate

```js
componentDidUpdate(prevProps, prevState, snapshot) {

}
```

ì»´í¬ë„ŒíŠ¸ì—ì„œ `render()`ë¥¼ í˜¸ì¶œí•˜ê³  ë‚œ ë‹¤ìŒì— ë°œìƒí•©ë‹ˆë‹¤. ì´ ì‹œì ì—ì„œëŠ” `this.props`ì™€ `this.state`ê°€ ë°”ë€Œì—ˆê³  í”¼ë¼ë¯¸í„°(ë§¤ê°œë³€ìˆ˜)ë¥¼ í†µí•´ ì´ì „ì˜ ê°’ì¸ `prevProps`ì™€ `prevState`ë¥¼ ì¡°íšŒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `getSnapshotBeforeUpdate`ì—ì„œ ë°˜í™˜í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤.

## Unmounting (ì»´í¬ë„ŒíŠ¸ ì œê±°)

ì»´í¬ë„ŒíŠ¸ê°€ ë” ì´ìƒ í•„ìš”ë¼ì§€ ì•Šê²Œ ë˜ë©´ ë‹¨ í•˜ë‚˜ì˜ APIê°€ í˜¸ì¶œë©ë‹ˆë‹¤.

### componentWillUnmount

```js
componentWillUnmount() {
  // ì´ë²¤íŠ¸, setTimeout, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸ìŠ¤í„´ìŠ¤ ì œê±°
}
```

ì£¼ë¡œ ë“±ë¡í–ˆì—ˆë˜ ì´ë²¤íŠ¸ ì œê±°í•©ë‹ˆë‹¤. ë§Œì•½ì— setTimeout ì„ ê±¸ì€ê²ƒì´ ìˆë‹¤ë©´ clearTimeout ì„ í†µí•˜ì—¬ ì œê±°ë¥¼ í•©ë‹ˆë‹¤. ì¶”ê°€ì ìœ¼ë¡œ, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œê²Œ ìˆê³  í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— dispose(ì²˜ë¶„) ê¸°ëŠ¥ì´ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ í˜¸ì¶œí•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.

## ì‹¤ìŠµ

https://codesandbox.io/s/64nrrk6mzn

> ì½˜ì†”ì— ì°íˆëŠ” ë©”ì‹œì§€ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”. ê·¸ë¦¬ê³  5ì˜ ë°°ìˆ˜ì¼ë•ŒëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë˜ì§€ ì•ŠëŠ” ê²ƒë„ í™•ì¸í•˜ì„¸ìš”.

## ì»´í¬ë„ŒíŠ¸ ì—ëŸ¬ ë°œìƒ

render í•¨ìˆ˜ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´, ë¦¬ì•¡íŠ¸ ì•±ì´ í¬ë˜ì‰¬ ë˜ì–´ë²„ë¦½ë‹ˆë‹¤. ê·¸ ìƒí™©ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” APIì…ë‹ˆë‹¤.

### componentDidCatch

```js
componentDidCatch(error, info) {
  this.setState({
    error: true
  });
}
```

ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ `componentDidCatch`ê°€ ì‹¤í–‰ì´ ë˜ê³  state.error ë¥¼ true ë¡œ ì„¤ì •í•˜ê²Œ í•˜ê³ , render í•¨ìˆ˜ìª½ì—ì„œ ì´ì— ë”°ë¼ ì—ëŸ¬ë¥¼ ë„ì›Œì£¼ì‹œë©´ ë©ë‹ˆë‹¤.

> `componentDidCatch ì£¼ì˜ì ` \
>  ì»´í¬ë„ŒíŠ¸ ìì‹ ì˜ render í•¨ìˆ˜ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•´ë²„ë¦¬ëŠ”ê²ƒì€ ì¡ì•„ë‚¼ ìˆ˜ëŠ” ì—†ì§€ë§Œ, ê·¸ ëŒ€ì‹ ì— ì»´í¬ë„ŒíŠ¸ì˜ ìì‹ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë“¤ì„ ì¡ì•„ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[ê¹€ë¯¼ì¤€ë‹˜ ìŠ¤í¬ë¡¤ 50%ìœ¼ë¡œ go](https://velopert.com/3631)

# ë©´ì ‘ ë¬¸ì œ

# ì°¸ê³ í•œ ë§í¬

[React DOCS](https://reactjs-org-ko.netlify.com/docs/react-component.html)

[ê¹€ë¯¼ì¤€ë‹˜ LifeCycle API (2016)](https://velopert.com/1130)

[ê¹€ë¯¼ì¤€ë‹˜ LifeCycle API (2018)](https://velopert.com/3631)

[zerocho LifeCycle](https://www.zerocho.com/category/React/post/579b5ec26958781500ed9955)

[likeagirl LifeCycle](https://code.likeagirl.io/understanding-react-component-life-cycle-49bf4b8674de)
