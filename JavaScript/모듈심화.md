# 모듈심화

파일별로 캡슐화한것이 모듈

모듈은 객체 안에 넣는 방법이 쉽습니다.

## Object Literal

우선 모듈을 정의하는 가장 쉬운 방법은 객체 리터럴입니다.

모듈화랑 모듈문법이랑 다르다.?
기능별 파일을 모듈이라고 많이 부릅니다.

## Module Pattern

디자인 패턴 - 여러 언어에서 사용. 서로 비슷한 기능에 정석화 하는 코드

ES2015이전은 모듈을 엄두하지 않고 만들어졌다. 그래서 ES2015부터 생겼다.

### Creating a Module

모듈이 우리에게 어떤 일을 하게 해줄 수 있는지 이해하기 위해서, 아래 코드가 어떻게 작동하는지를 먼저 알아야한다(고 합니다):

```js
(function() {
  // code
})();
```

이건... IIFE...?

즉시호출함수표현식(Immediately-Invoked-Function-Expressions)는 함수를 선언하고,ㅌ선언한 함수를 그 즉시 호출합니다. 함수는 새로운 **스코프**를 생성하고, `privacy`(정보를 보호 할 수 있는 성질)을 생성합니다.

네임스페이스란 수개의 함수, 객체, 변수들로 이루어진 코드가 전역 스코프에서 정리 안 된 내 방 물건처럼 떠다니지 않게하기 위해 하나의 전역 객체를 만들고 모든 기능을 이 객체에 추가하는 것을 말합니다.

예를 들어, Array의 내장 메소드들은 Array라는 네임스페이스를 가지며, 배열에 관한 기능들은 Array 이름 내에 추가하는 것을 말합니다. 이렇게 네임스페이스를 지정해주면 코드 내부에서의 이름 충돌 뿐만아니라 같은 페이지에서 의존성을 가진 다른 라이브러라나 위젯 등의 서드파티 코드와의 이름 충돌도 방지할 수 있습니다.

전역스코프가 아니라 네임의 공간이라고 할 수 있습니다. 객체의 이름도 네임스페이스가 됩니다.

IIFE에서도 명함수를 호출하고 있기 때문에 함수의 반환 값에 접근하기 위해서라도 네임스페이스는 필요합니다. 네임스페이스를 만들어보겠습니다.

```js
const Module = (function() {
  // code
})();
```

모듈패턴을 사용하기위해서 클로저를 사용합니다.

## Privacy & Private Method

### Privacy

Module Pattern은 클로저를 사용해서 상태와 구조를 캡슐화 시켜 private 하게 만들 수 있습니다. 이 패턴에서는 오직 public API만 리턴이 되고 나머지는 모두 클로저 안에서 private하게 위치하게 됩니다. 이러한 방법으로 우리의 로직을 보호할 수 있고 오직 필요한 부분만 외부로 노출시켜 다른 부분에서 사용하게 만들수가 있습니다.

여기서 하나 짚고가야 하는 부분이 있습니다. 실제 자바스크립트의 언어 자체에는 전통적인 다른 프로그래밍언어와는 다르게 private 에 대한 개념이 없습니다. 즉, access modifiers(접속 제한자 ex. java> public, private, protected, default ) 가 없습니다.

에초에 우리는 나눠어서 쓰는것이 없어서 크로저를 사용합니다. 크로저를 사용하면 코드 접근을 제안을 줄수 있기 때문에

### Private Method

```js
// 가져다가 쓸수 없기(return이 없음) 때문에 에러 뿜뿜
const Module = (function() {
  const privateMethod = function() {
    // do something
  };
})();
```

나는 우리 메소드가 누군가에게 호출되지 않기를 원한다. 특히 서버로 왔다갔다 하거나 데이터를 조작하는 메서드에 필요합니다.
스코프 내부에서 private한 메소드, 변수 등을 정의할 때는 명시적으로 구분하기 위해 해당 값을 담을 변수 이름 앞에 `_`를 붙이는 것이 관례입니다.(인 것 같습니다.)

# 모듈 번들러 vs 모듈 로더

### 모듈 로더

- 런타임에 실행된다.
- 브라우저에서 모듈 로더를 로드한다.
- 모듈 로더에게 어떤 메인 애플리케이션 파일을 로드할 것인지 알려준다. (메인 파일 던져줌)
- 모듈 로더는 메인 애플리케이션 파일을 다운로드하고 해석한다. (메인 파일 읽음)
- 필요한 경우 모듈 로더가 파일을 다운로드한다. (읽다가 다른 모듈 파일을 가져와야할 경우 그 때 동적으로 해당 모듈을 로딩한다.)
- **SystemJS**, RequireJS(amd를 사용하면)

### 모듈 번들러

- 빌드 타임 실행된다.
- 빌드 시 번들 파일을 생성하기 위해 모듈 번들러를 실행한다. (예: bundle.js: 다발로 만들어지 하나의 파일)
- 브라우저에서는 번들 파일을 로드한다.
- 브라우저에서 모듈 로더를 필요로 하지 않는다. 모든 코드는 번들 안에 포함되어 있다.
  webpack, parcel, browserify(parcel이 가장 최근에 만들어진 번들러이지만 많은 개발자들이 webpack을 주로 사용하고 있습니다.)

# webpack

1. 파일 간에 코드를 공유하려면 어떻게 해야 합니까?
   모듈를 사용하여 import, exprot를 사용합니다.(ESM)

1. 실제 코딩하면서 클로져를 많이 사용하는가? 주로 어떤 패턴으로 사용하는가?
   모듈 패턴에 많이 사용합니다.

1. "Javascript 모듈 패턴(Javascript module pattern)"이 무엇인지 설명을 해주시고, 언제 사용하는지도 말씀해주시기 바랍니다.

디자인 패턴이라고 부르는 패턴 중 하나이며 모듈을 정의하는 방법 중 하나입니다.
자바의 접속 제한자 모방하여 private, public 메서드 모두를 포함시킬수 있습니다.
네임스페이스이용하여 함수이름이나 변수가 출동을 예방할수 있습니다.

1. AMD와 CommonJS는 무엇이고, 이것들에 대해 어떻게 생각하시나요?
